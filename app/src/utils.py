import numpy as np


def normalize_scores(scores):
	"""
		Normalize a score list between the 0-1 range
	"""
	exp_scores = np.exp(scores - np.max(scores))
	probs = exp_scores / exp_scores.sum()
	return list(probs)

def get_data(request_data):
	"""
		Extracts main data structures from the request json
	"""
	questions = [padded_question for question in request_data for padded_question in [question['question']]*len(question['contexts']) ]
	contexts = [context['text'] for question in request_data for context in question['contexts']]
	unormalized_ir_scores = [[context['score'] for context in question['contexts']] for question in request_data]
	ir_scores = [score for scores in unormalized_ir_scores for score in normalize_scores(scores)]
		
	# Combine id with question to cover the case where the same document id is retrieved for different questions
	ids = [f"{i}-{context['id']}" for i,question in enumerate(request_data) for context in question['contexts']]

	return questions, contexts, ir_scores, ids

def jaccard_sim(str1, str2):
	"""
		Jaccard similarity between two strings
	"""
	a = set(str1.split()) 
	b = set(str2.split())
	c = a.intersection(b)
	return float(len(c)) / (len(a) + len(b) - len(c))

def get_unsorted_results(span_prediction,ir_scores,contexts,request_data,qa_cut):
	"""
		Returns a list of non-overlaping answers for all the questions and update 
		their score
	"""
	unsorted_results = {}
	for q_id,ir_score, context in zip(span_prediction,ir_scores, contexts):
		q_index,id = q_id.split("-",maxsplit=1)
		question = request_data[int(q_index)]['question']

		doc_answers = []
		for answer in span_prediction[q_id]:

			# Check if the answer overlaps with previous answers
			if any([max(answer['start'],ranked_answer['span'][0])
					<= min(answer['end'],ranked_answer['span'][1]) for ranked_answer in doc_answers]):
				continue

			# Crop 
			span = [answer['start'],answer['end']]
			par, span = crop2(context,span)

			doc_answers.append({
				"id": id,
				"text": answer['answer'],
				"score": (ir_score+answer['score'])/2,
				"paragraph": par,
				"span": span}
			)
			
			if len(doc_answers)==qa_cut:
				break

		
		unsorted_results.setdefault(question, []).extend(doc_answers)
	return unsorted_results

def crop(par, span, max_length=100):
	"""
		Crop text around a span
	"""

	par = par.replace("'",'"')
	span = span.replace("'",'"')

	n_words = len(par.split())

	if n_words <= max_length:
		return par

	start, end = par.split(span,1)
	start = start.split()
	end = end.split()

	# Ideally we want both sizes with the same number of words
	e = s = int(max_length/2)

	l_start=len(start)-e
	l_end=len(end)-s

	if(l_start<0):
		s+=abs(l_start)
	elif(l_end<0):
		e+=abs(l_end)

	start = '... ' + ' '.join(start[-e:])
	end = ' '.join(end[:s]) + ' ...' 


	return start+' '+span+' '+end

def crop2(par, span, max_length=100):
	"""
		Crop text around a span
	"""

	par = par.replace("'",'"')
	answer_text = par[span[0]:span[1]]

	n_words = len(par.split())

	if n_words <= max_length:
		return par, span

	start = par[:span[0]]
	end = par[span[1]:]
	start = start.split()
	end = end.split()

	# Ideally we want both sizes with the same number of words
	e = s = int(max_length/2)

	l_start=len(start)-e
	l_end=len(end)-s

	if(l_start<0):
		s+=abs(l_start)
	elif(l_end<0):
		e+=abs(l_end)

	start = '... ' + ' '.join(start[-e:])
	end = ' '.join(end[:s]) + ' ...' 

	par = start+' '+answer_text+' '+end
	new_start = par.index(answer_text)
	new_end = new_start+len(answer_text)
	
	return par, [new_start,new_end]


# answer1="Chronic conditions like obesity, CVD, and hypertension together with changed expression of ACE2, dysregulated immunoresponse, and endothelial dysfunction"
# answer2="Chronic conditions like obesity, cardiovascular disorders, and hypertension, together with changed expression of ACE2, dysregulated immunoresponse, and endothelial dysfunction,"
# print(jaccard_sim(answer1,answer2))

# text = "..SARS-CoV2 causes COVID-19.1 It is an enveloped virus and has ssRNA, which generally infects the upper respiratory tract in humans.2 COVID-19 is highly contagious and is transmitted via respiratory droplets from infected persons.3 It enters the human body via upper respiratory mucous membrane and thereafter affects the lungs.4 In most cases, COVID-19 infection is a minor disease; however, some individuals develop serious characteristics of infection through compromised respiratory function (SpO2 <93%; pulmonary infiltrate, >50% of lung field during radiology, respiration rate ≥30 breaths per minute, PaO2:FiO2 <300).5 Few people have developed dangerous or life-threatening coronavirus infection through multiple-organ failure.6 Information related to COVID-19 patients has suggested that most of them had comorbidities. Diabetes (DM), hypertension, and cardiovascular disease (CVD) are highly prevalent comorbidities associated with COVID-19. Data from COVID-19 patients have revealed that COVID-19 is linked with high blood-glucose level, mainly in people with type 2 DM (T2DM).7 Due to high DM prevalence, it is very important to study specific characteristics of SARS-CoV2 in diabetic people.8 Several studies have also reported that immunocompromised COVID-19 patients, including those with HIV, pregnant women, and cancer patients, could be at higher risk of severe COVID-19 symptoms.9–12 Nations with high HIV-infection rates, such as India and South Africa, tend to have more COVID-19 patients.11 Sahu et al suggested that COVID-19 infection in pregnant patients requires extra management with special care.12 The UK National Health Service found that some groups, including blood cancer patients and those undergoing radio- or chemotherapy for lung cancer, were particularly susceptible to severe COVID-19 infection.10 At the time of writing, COVID-19 cases are increasing day by day with >91 million confirmed cases, 1,986,871 deaths worldwide,13 and >10.5 million confirmed cases with 151,918 deaths in India.14 In 2019, around 77 million were living with DM in India, and this number will increase to 101 million by 2030 and 134.2 million by 2045. After China, India has the second-highest number of diabetic patients across the globe.15 In India, about 12.1 million people aged ≥65 years had DM in 2019.16 According to an International DM Federation report, India had the greatest number of children and adolescents (age 0–14 years) living with type 1 DM in 2019. There are around 15.9,000 new type 1 DM cases reported annually in children and adolescents.16 T1DM and T2DM are two types of DM.17 Both types intensify the risk and complications related to the infection.18,19 Viral and bacterial diseases in the respiratory system are common infections associated with DM, and disrupted humoral immunoresponse, neutrophil dysfunction, and decreased T-lymphocyte responses contribute to the infection.5,20 Increase risk of mortality and morbidity after pneumonia is linked with DM, and people with high blood glucose (>200 mg/dL) have more pneumonia complications than those with normal glucose levels.21,22 At the time of the SARS epidemic (2002–2003), DM remained an autonomous interpreter of risk of mortality (OR 3, 95% CI 1.40–6.30; p=0.005).23 During the MERS-CoV epidemic (2012), comorbidities like DM influenced the risk of mortality (adjusted HR 3.74 per year, 95% CI 2.57–5.56).24 Studies also reported that among all comorbidities, DM had the greatest influence on risk of mortality in people with MERS-CoV.25 Furthermore, similar results were observed during H1N1 infection (2009), where DM intensified intensive care unit (ICU) admission of young patients with H1N1 (OR 4.72, 95% CI 1.81–12.3).26 In this review, we discussed the mechanisms involved in COVID-19 and DM, the role of ACE2 in COVID-19 pathogenesis and management of DM, and associated complications in COVID-19 patients. The period between infectivity and onset of disease is known as incubation time. A study involving 1,099 people infected with COVID-19 reported that average incubation time for symptomatic SARS-CoV2 was 4 days.27 Another study on 181 COVID-19 patients from China confirmed an average incubation time of 5 days for SARS-CoV2, and in 97.5% of patients, symptoms of infection developed within 12 days.28 On the basis of the incubation time of SARS-CoV and MERS-CoV, the US Centers for Disease Control and Prevention (CDC) projected that COVID-19 symptoms would arise2–14 after infection. As such, 14 days (quarantine) is the period used for examining and limiting the movement of individuals at risk.29 Most of the original people infected with COVID-19 had a history of direct contact with a wholesale market for wildlife and seafood in China, signifying the exposure of zoonotic virus as a major transmission mode of COVID-19.30 Analysis of virus-sequencing data revealed that COVID-19COVID-19 found in bats and SARS-CoV2 may have a common ancestor, though this Chinese wholesale market does not sell bats.31 After some time, COVID-19 infections were found in health-care personnel and other individuals with no contact with wildlife or travel history in Wuhan, China, indicating individual-to-individual transmission or spread of COVID-19.30 Numerous studies have suggested that SARS-CoV2 could be transmitted via aerosols, drops, and direct contact with infected persons (Figure 1). Respiratory drops spread infection from one individual to another through sneezing and coughing. This happens because respiratory drops from an infected individual get into the air and are inhaled by healthy individuals nearby (within 2 m). Individuals can get COVID-19 infection via contacting contaminated objects or surfaces infected with COVID-19 and then touching their eyes, mouth, or nose.32 Studies have revealed that COVID-19 can stay viable within aerosols for up to 3 hours and spread in a closed system if inhaled breathed into the respiratory tract.32,33 As such, transmission of COVID-19 through the air has been made possible due to aerosol-producing processes like cardiopulmonary resuscitation, bronchoscopy, tracheostomy, endotracheal intubation, and noninvasive positive-pressure ventilation.13 SARS-CoV2 infection can be differentiated into three phases: phase 1 is the initial infection stage, phase 2 the pulmonary stage, and phase 3 the hyperinflammation stage.34,35 In the early phase of infection, patients show symptoms like headache, fever, and dry cough. Clinical signs involve increased lymphopenia, high IL6, D-dimer, and prothrombin, and mild level of lactate dehydrogenase. In the pulmonary stage, some patients show abnormal chest images, breathlessness, and increased levels of transaminases. In the more serious stage, some develop cytokine storm, which leads to other complications involving shock, multiorgan failure, acute respiratory distress syndrome, and death. Elevated clinical inflammatory markers, such as lactate dehydrogenase, ferritin, D-dimer, IL6, troponin, CRP, and N-terminal (pro–brain natriuretic peptide are hallmarks of this stage. These results are in line with MERS and SARS in that the incidence of cytokine storm and lymphopenia may play an important role in COVID-19 pathogenesis.36–38 Therefore, disease intensity in COVID-19 patients is due both to the virus and the response of the host.39 It is not known how long it takes for a COVID-19 patient to recover from infection. The infectivity period is estimated by detecting the virus or its ssRNA in respiratory tract samples. Though, presence of ssRNA of virus does not approve the contagious virus occurrence. Reports suggest that transmission of the virus may occur in the early stage of COVID-19 infection, as high virus loads are found in respiratory samples shortly after the onset of symptoms.40 The period of shedding of the virus changes with the seriousness of the infection. About 90% of COVID-19 individuals with mild symptoms show an absence of virus or give negative tests on nasal swabs after 10 days of onset of infection, whereas in serious and critical cases, nasal swabs are positive.41 Studies have also revealed that the virus load found in asymptomatic individuals was similar to the virus load found in symptomatic patients.40 Real-time PCR is an important and widely used method for diagnosis of COVID-19 where RNA is converted into cDNA using reverse transcriptase, which is quantified using different primer sets, as recommended by the World Health Organization and using RNAse P as an internal control.43 Different regions in the genome have been identified, which has served as the template for primer design, with primers targeting E gene, N gene, and RNA replicase or RdRp possessing the highest sensitivity.43,44 Beside this, a number of multiplex assays have been developed that can target multiple genes together, eg, RdRp/Hel, S, and N.45 Multiplexing offers improved sensitivity in cases of degraded virus-RNA samples and development of putative mutations, with sensitivity >95%. However, false-positive tests might be obtained through primer cross-reactivity with other coronaviruses like SARS-CoV.46 The isothermal method does not requires thermal cycling as a conventional RT and amplifies DNA at a particular temperature, but delivers sensitivity similar to PCR.46 Variations of isothermal amplification have been developed, such as HAD,47 NASBA,48 LAMP,46 SDA,49 and RPA.50 RT-LAMP uses four to six pairs of primers corresponding to distinct regions in the genome, which imparts the assay very high specificity.51–53 This test involves an SD polymerase and primer binding, as well as amplification, and occurs at 60°–65°C. The reaction occurs in a single Eppendorf tube, and the DNA product is identified through its turbidity, color, or fluorescence, depending on the type of reagent added.54 The assay offers several advantages, such as ease of operation, less background signal, and higher sensitivity, in comparison to conventional RT-PCR.51 However, its major drawback is the requirement for extensive optimization of the primers. RT-LAMP can be multiplexed using polymeric beads with unique signatures and barcodes,55 which increases the amount of information gained through a single reaction.56 Multiplexing allows us to measure different biomarkers in a single reaction with improved specificity and sensitivity. These barcoded bead-based assays still need thorough optimization before being introduced into the clinical setup. However, barcoded bead-based assays are still available for the diagnosis of cystic fibrosis and respiratory diseases.57 This test can qualitatively determine the occurrence of COVID-19 antigen and provide results in much less time, which provides the opportunity for better management of the disease. However these tests suffer from poor sensitivity, as observed with influenza viruses.58–61 ELISAs can detect specific antibodies among respiratory and blood samples of an infected person. Antibody-mediated immunity against virus can be determined by measuring generated IgG and IgM. IgM is produced on the basis of the initial humoral response against the virus, while IgG is produced after 7 days of infection and stays thereafter, mediating the acquired immunoresponse.62,63 Detection of COVID-19 in patients by detecting the antigen is difficult compared to other developing methods that identify NAbs, as it requires production of purified monoclonal antibodies. Immunodetection can also be used in identifying recovered patients whose convalescent plasma can be utilized for the treatment of critical patients.64 Proteins that mediate virus entry into host cells by interacting with ACE2 receptor are the key target for developing diagnostic antibodies.65 Other targets include the N protein and virally encoded repressor.66 ELISAs are an easy and appropriate method for rapid recognition of antibodies generated against COVID-19 in a short period in the same patient. Receiver-operating characteristic analysis has revealed that the sensitivity of IgG- and IgM-based ELISAs 88.9% and 48.1%, respectively, whereas specificity was 90.9% and 100%. The lower sensitivity associated with IgM is due to the fact that the response occurs early and then gradually decreases with time,67 which can be improved by the incorporation of novel labels like gold-labeled Ig.68 Many studies have revealed that life-threatening and critical cases of COVID-19 are found among old patients or in persons with comorbidities, specifically DM, hypertension, CVD,cancer, and chronic renal and lung disorders.27,37,38,69 Table 1 shows the prevalence of comorbidities among COVID-19 patients.8 One meta-analysis from China on 1,527 infected individuals reported that the highly prevalent comorbidities associated with SARS-CoV2 were hypertension (17.1%, 95% CI 9.9–24.4), DM (9.7%, 95% CI 6.9–12.5) and cerebrovascular disorders (16.4%, 95% CI 6.6–26.1). This meta-analysis showed that COVID-19–infected people with hypertension or DM had double the severity of infection or ICU admission, whereas patients with cerebrovascular disorders showed triple the disease severity.36 A comprehensive review and meta-analysis reported that older age and associated comorbidities, such as DM, hypertension, heart disorder, chronic obstructive pulmonary disease (COPD), chronic kidney disease), and chronic liver disease enhanced the risk of progression to critical disease and death among COVID-19 patients.70 Moreover, it has been observed that COVID-19 causes more neurological complications than MERSCoV aor SARS-CoV.71 A comprehensive evaluation reported that hypertension is more common than T2DM in patients with COVID-19.72 Another study reported that blood type influenced prognosis in COVID-19 patients with hypertension.73 A study conducted on COVID-19 patients with hypertension found significantly higher values on prothrombotic indices and high rates of cardiac damage and mortality in non–O blood-group patients in comparison with Oblood–group patients. This study also suggested that endothelial dysfunction level in non–O blood-group patients can be increased by prothrombotic status.73 Lip reported that endothelial dysfunction in patients with hypertension can trigger stroke and cardiac injury through thromboembolism.74 It has been recommended that modified immune-system, anti-inflammatory, and anti-hypertensive treatments may inhibit poorer prognosis and increase clinical consequences in hypertensive patients with COVID-19.75 Furthermore, antihypertensive drug treatment, including ACEIs and ARBs did not influence the prognosis among patients with COVID-19. As a result, it was suggested that hypertensive patients with COVID-19 infection undergoing antihypertensive drug therapy should continue their treatment to manage hypertension and prevent severe complications.75 Several studies have identified stroke in COVID-19 patients.71,76–78 Mechanisms involving endothelial dysfunction and immunomediated injury cause stroke and lead to hypoxia-induced injury and cytokine storm.71 Yang et al reported that chronic kidney–disease patients with COVID-19 exhibited poor prognosis, high prevalence of neutrophilia, and in-hospital deaths and also that dialysis patients are more susceptible to COVID-19 infection.79 A study from India reported that 14.2% of 21 COVID-19 patients had DM.80 Of 355 COVID-19–infected people who expired in Italy, only three were had no comorbidities.81 A couple of studies have revealed that along with the lungs, SARS-CoV2 can also harm the kidneys, heart, and/or liver.35,82 There is a need to treat these comorbidities along with COVID-19 infection, especially among old-age individuals who already have serious and critical infections. Diabetic patients have chronic low-level inflammation, leading to exaggerated monocyte, macrophage, and T-cell recruitment, thereby promoting inflammation in a feedback loop. Excess production of proinflammatory cytokines may ultimately damage the infrastructure of the lungs. As a result, cytokine storm may activate the coagulation system. In all types of viral infections, effective clearance of virus load strongly depends upon the combined action of adaptive and innate immunity.39 High blood glucose may repress the antiviral response.97 It has been observed that diabetic patients undergo changes in components of innate immunity. For instance, primary cell events to identify and destroy pathogens like phagocytosis and chemotaxis are impaired in diabetic patients.98,99 More proinflammatory M1 macrophages are present among T2DM patients, whereas natural killer–cell activity is reduced in patients with DM.100,101 Moreover, activity of T cells is distorted. Diabetic patients are in a low chronic proinflammatory phase with TH1–TH2 imbalance.102,103 Irrespective of endothelial cell participation, primary delay in response of IFNγ, along with hyperinflammatory responses in diabetic patients may worsen the cytokine storm and increase the severity of COVID-19 infection.39 Virus infection induces pyroptosis and is related to inflammation and vascular injury, as seen in SARS-CoV patients.104 It has been observed that destruction by COVID-19, MERS, and SARS is not restricted to the lungs only, appearing in other organs, such as the kidneys and heart, which suggests that SARS-CoV2 can infect blood vessels and spread to other body organs.105 Monteil et al showed that SARS-CoV2 can directly infect vascular endothelial cells in engineered human capillary organoids.106 Another study demonstrated the occurrence of viral accumulation and elements of inflammatory cells in the blood vessels of patients with COVID-19.107 These studies suggest that SARS-CoV2 infection may induce endothelial inflammation among other organs and that pyroptosis may play a key role in host inflammatory responses and endothelial cell damage. High blood pressure, kidney disorders, DM, venous and arterial thromboembolism, and neurological diseases in COVID-19 patients signify that SARS-Cov-2 affects the endothelium.72 Endothelial dysfunction is associated with microvascular complications in patients with T1DM or T2DM.108 The receptor-binding domain of SARS-CoV2 uses host-cell ACE2 to bind membranes of host cells and virus.109 ACE2, type 1 glycoprotein, is abundantly expressed in the lungs, kidneys, heart and endothelium.110 ACE2 upregulation provides more receptors for entry of viruses and causes more viruses to enter host cells.111 ACE2 transforms angiotensinogen I into angiotensinogen (1–9) and angiotensinogen II into angiotensinogen (1–7) (Figure 3). These have cardioprotective and anti-inflammatory effects, and later function as vasodilators. Under normal circumstances, many studies have demonstrated reduced expression of ACE2 in lung cells and tissue.112,113 However, injury in lungs upregulates ACE2 expression. Studies on human and animal subjects have reported that ACE2 can be used as a therapeutic agent in the treatment of inflammatory acute lung injury.114,115 Moreover, SARS-CoV seems to downregulate the expression of ACE2 in virus-infected cells.116 People infected with SARS in 2003 showed high blood glucose in comparison to patients with pneumonia without SARS infection, regardless of premorbid blood-glucose levels or disease severity.5 Consequently, SARS-CoV combined with ACE2 in islet cells of the pancreas and injures them, which increases blood glucose. It also contributes to increased mortality rates in patients with/without DM.117 A similar process may occur in SARS-CoV2 infection and contribute to high blood glucose and related complications, as well as a high rate of mortality. Though few features of ACE1 and ACE2 are similar, but ACEIs does not inhibit ACE2.118 The expression of ACE2 is upregulated by ARBs and ACEIs. As such, ARBs or ACEIs may help SARS-CoV2 infection, which leads to disease severity.119 Moreover, polymorphism in the ACE2 gene is associated with elevated DM and CVD risk, which can cause vulnerability to COVID-19, whereas upregulation of ACE2 increases angiotensinogen (1–7) levels, which leads to increased anti-inflammatory effects. However, COVID-19 infection downregulates the expression of ACE2 and reduces the level of angiotensinogen (1–7), which decreases the anti-inflammatory effects of angiotensinogen (1–7), and thus organs become more vulnerable to infection.113 There are many people currently living with DM in India. Around 18 million diabetics aged ≥65 years are specifically susceptible to mortality because of COVID-19 pandemic.120 This huge number is a major challenge in the assessment, management, and prevention of COVID-19 in India.27 Poverty, illiteracy, overpopulation, a distressed health-care system, and unplanned towns are the main obstacles in the fight against COVID-19 in India.121 During lockdown, diabetics have raised their carbohydrate intake and also reduced physical exercise, which results in gain in body-weight gain and destabilization of blood-glucose levels in the body.122 A study examined the link between the period of lockdown in India and loss of glycemic control and subsequent complications. The projected increase in HbA1c from base-line was 2.26% after 30 days of lockdown and 3.68% after 45 days of lockdown. The projected increase in complication rate was 2.9% for peripheral neuropathy, 2.8% for diabetic retinopathy, 0.5% for stroke, 0.9% for heart attacks, and 14.2% and 9.3% for proteinuria and microalbuminuria, respectively.123 This represents an increase in the number of people with DM and its complications. Pal et al reported that 72% of all T1DM patients complained of high blood glucose based on self-monitored blood-glucose records during the nationwide lockdowns in India.124 Trained immunity provided by bacillus Calmette–Guérin (BCG) vaccination may offer some protection from the deleterious effects of COVID-19.125 In fact, lower mortality and disease burden were found in the primary weeks of the COVID-19 pandemic among countries that had a universal BCG-vaccination policy.126 However, several variations from this general finding have also been found. For instance, in Israel a study reported that people born after or during the universal BCG-vaccination policy did not exhibit any deviation in mortality or infection rate for COVID-19, though the study was limited to younger age-groups.127 Similarly, Brazil also had a universal BCG-vaccination policy for a long time, but also witnessed a rise in mortality and COVID-19 infection.128 Iran began universal vaccination in 1984, but did not exhibit the same protection from high mortality as seen in nations like India, which started universal BCG vaccination much earlier.129,130 As such, BCG vaccination may provide ethnicity-specific protection against viral microbes among South Asian populations, though the role of other factors needs to be examined. COVID-19 with comorbidities leads to a fierce circle of high mortality and vast morbidity in infected patients. SARS-CoV2 exposure among people with comorbidities like CVD (reduced immunity and function of heart), DM (high expression of ACE2 and lung inflammation) are detrimental to the heart, liver, kidneys and lungs. These complications result in adverse impacts on the patient due to ARBs, shock, multiorgan failure, renal and heart failure, and ultimately death.131 The US National Institutes of Health (and the World Health Organization have released suggestions on the basis of expert advice and clinical evidence for optimum care of COVID-19 patients.132 ThoughCOVID-19 patients mostly develop minor symptoms, around 20% require hospital care, 5%–8% develop serious diseases and require critical care and ICU admission.37 Variation in ICU-admission rates in different nations depends on admission requirements and clinical practice in the particular region. Furthermore, the rate of ICU admission is also influenced by factors like comorbidity and age. Disorders like CVD, hypertension, DM, asthma, and malignancy have been found to be key risk factors of serious conditions in COVID-19 patients and increased mortality rate. As such, special attention should be paid to these patients. A pilot study observed that continuous glucose monitoring is needed even in non–critically ill diabetic patients with COVID-19 infection.133 Many COVID-19 patients die due to preexistent comorbidity, and thus correct assessment is needed at the time of admission to hospital.134 It is important to segregate COVID-19 patients with and without comorbidities into two distinct groups, and separate recommendations must be considered for these patients.105 People with comorbidities must adhere strictly to personal care routines, especially physical/social distancing and hand-washing.135 Diabetic patients must increase their metabolic control as required, as it is a primary preventive step of COVID-19 infection.7 Influenza vaccination decreasespneumonia risk by 43%–55% among people with DM, and can be applied to distinguish symptoms of COVID-19 and influenza.136 Because of reduced immunity among patients with comorbidity, it is recommended that if a patient is experiencing minor symptoms that can be regulated at home, they should live inisolation. Additionally, physician consultations must be augmented for managing COVID-19 infection in patients with comorbidities.134 Sardu et al reported that during hospitalization, optimal glycemic control was linked to reduced risk of serious conditions and death in COVID-19 patients. They found that during hospitalization, D-dimer and IL6 levels were substantially higher in hyperglycemic patients than normoglycemic patients (P<0.001).137 In T2DM patients, altered glucose homeostasis and insulin resistance cause interstitial lung disease and alveolar capillary microangiopathy via conditions like overinflammation.138 This suggests that COVID-19 patients with hyperglycemia are at higher risk of disease severity during hospitalization. Overactivation of innate immunity might be a poor outcome of COVID-19 infection in hyperglycemic patients, including those treated with tocilizumab, which is an IL6 inhibitor.139 Despite complete treatment with antivirals, oxygen therapy, and hydroxychloroquine, hyperglycemic patients with COVID-19 infection have poorer prognosis.140 These data suggest that early management of glycemia may be a potential therapeutic method to reduce poor outcomes among hospitalized hyperglycemic COVID-19 patients with/without prior diagnosis of DM.141 Mostly, T2DM patients have other elements of metabolic disorders like dyslipidemia and hypertension. As such, continuous treatment is suitable for lowering lipids and hypertension in people with T2DM. Use of ARBs and ACEIs in treatment may enhance ACE2 expression, which facilitates virus entry into host cells (Figure 4).142 SARS-CoV2 may damage ACE2- and Mas1-receptor pathways and increase harmful AT2 action, as they can provide a safeguard against lung injury after COVID-19 infection. A recent study reported that ACEI and ARB prescriptions benefited COVID-19 patients in terms of reducing mortality and hospital stay.143,144 Studies from the European Society of Cardiology, American College of Cardiology, American Heart Association, and Heart Failure Society of America have recommended that T2DM patients continue with hypertension treatment, which should include ARBs and ACEIs.7,145 Drugs, particularly statin, can fix the reduced ACE2 caused by high levels of lipids, such as low-density lipoprotein.146 Anti-inflammatory effects of statins contributed into upregulation of ACE2. Table 2 shows pharmacotherapies used during COVID-19 infection for DM and associated complications.5 Due to the close association between CVD and DM, the researchers recommended the management of concentration of lipids in COVID-19 patients. People who have undergone kidney, islet, or pancreas transplantation and those on immunosuppressive treatment are at high risk of COVID-19 infection.7 Data show that most T2DM patients are obese or overweight. BMI is a vital factor of oxygenation, lung volume, and respiratory mechanics at the time of automated ventilation in the body, particularly in a horizontal posture. Therefore, obese diabetic patients can be at higher risk of ventilation failure and problems at the time of automated ventilation.147 India has developed several national strategies and policies, such as the National Cancer Control Programme, National Trauma Care Programme and National Programme for Prevention and Control of Diabetes, Cardiovascular Disease, and Stroke, to carefully tackle the chronic disorder burden.148 SARS-CoV2 may cause long-term metabolic disorders in infected people. Similar results were observed in individuals infected with the SARS virus.149 There is a need for regular and constant cardiometabolic examination of people who have survived severe and critical SARS-CoV2 infections.7 COVID-19 is highly prevalent among health-care professionals with DM, who administer care to COVID-19 patients. Therefore, wherever possible, these workers must not work around sick people or they should use high-level safety protocols.7,150 Dorjee et al suggested that appropriate management of modifiable risk factors like DM and hypertension may decrease mortality and morbidity due to COVID-19.70 People with DM must exercise regularly. Exercises like stationary running, cycling, resistance training, and treadmill are helpful, and everyone can easily follow this exercise routine in India. Diabetic people should maintain consistency in their regular meals. They must eat healthily, with a balanced quantity of fibers and proteins. A limited amount of fat in food is vital to control blood-glucose levels.It is important to regularly take prescribed medicines or antidiabetic drugs and insulin on time.Patients should keep their feet clean to prevent problems linked to the feet.Old people should know the ambulance number (102) for emergency situations.Diabetic people should visit hospital immediately in emergency conditions, such as chest pain, altered senses, shortness of breath, drowsiness, weakness in the limbs, and vomiting.8,151 SARS-CoV2 is extremely infectious and transmitted via respiratory droplets from infected persons. Severe cases of COVID-19 have been observed in people with comorbidities, particularly CVD, hypertension, and DM. An increasing number of studies have shown DM to be a vital risk factor affecting the severity of various other kinds of infection. Dysregulated immunoresponse found in diabetic patients plays an important role in exacerbating severity. DM is among the comorbidities linked to mortality and morbidity due to COVID-19. Chronic conditions like obesity, CVD, and hypertension together with changed expression of ACE2, dysregulated immunoresponse, and endothelial dysfunction may put diabetic patients at greater risk of COVID-19 infection. The awareness and opinions of people are likely to impact the great amount of protection methods and eventually affect the results of clinical research. Therefore, it is important to study specific characteristics of COVID-19 in diabetic people and treat comorbidities along with COVID-19 infection, mainly among old individuals who are already suffering from serious and critical infections. ..."
# answer = "Chronic conditions like obesity, CVD, and hypertension together with changed expression of ACE2, dysregulated immunoresponse, and endothelial dysfunction"

# start = text.index(answer)
# end = start+ len(answer)
# print(crop2(text,[start,end]))